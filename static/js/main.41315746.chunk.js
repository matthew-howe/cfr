(this.webpackJsonpcfr=this.webpackJsonpcfr||[]).push([[0],{29:function(t,e,r){},40:function(t,e,r){},41:function(t,e,r){},42:function(t,e,r){},43:function(t,e,r){},44:function(t,e,r){},45:function(t,e,r){"use strict";r.r(e);var n=r(1),i=r(0),a=r(9),c=r.n(a),s=(r(29),r(2)),u=r(7),o="UPDATE_REGRETS",l={count:0,regrets:[]};function h(t){var e=t.strat;function r(){}function i(t){}return Object(n.jsxs)("div",{className:"rps-form",children:[Object(n.jsx)("form",{onSubmit:r,children:Object(n.jsx)("label",{children:Object(n.jsx)("input",{type:"text",id:"rfreq",value:e[0].toFixed(2),onChange:i})})}),Object(n.jsx)("form",{onSubmit:r,children:Object(n.jsx)("label",{children:Object(n.jsx)("input",{type:"text",id:"pfreq",value:e[1].toFixed(2),onChange:i})})}),Object(n.jsx)("form",{onSubmit:r,children:Object(n.jsx)("label",{children:Object(n.jsx)("input",{type:"text",id:"sfreq",value:e[2].toFixed(2),onChange:i})})})]})}var j=r(4),d=r(6),v=r(23),g=r(21),f=r(17),b=(r(37),function(t){Object(v.a)(r,t);var e=Object(g.a)(r);function r(){return Object(j.a)(this,r),e.apply(this,arguments)}return Object(d.a)(r,[{key:"componentDidUpdate",value:function(t){this.props}},{key:"renderRegrets",value:function(t){return t.map((function(t){return Object(n.jsxs)("div",{children:[Object(n.jsx)("span",{children:t[0]}),Object(n.jsx)("span",{children:t[1]}),Object(n.jsx)("span",{children:t[2]})]})}))}},{key:"render",value:function(){var t={name:"Rock",data:{}},e={name:"Paper",data:{}},r={name:"Scissors",data:{}},i=0;for(var a in this.props.regrets)t.data[i]=this.props.regrets[a][0],e.data[i]=this.props.regrets[a][1],r.data[i]=this.props.regrets[a][2],i++;var c=[t,e,r];return console.log(c),Object(n.jsx)(f.a,{data:c})}}]),r}(i.Component)),O=Object(u.b)((function(t){return{regrets:t.rps.regrets}}))(b),S=r(22),m=function(){function t(e,r){Object(j.a)(this,t),this.strategy=[0,0,0],this.regretSum=[0,0,0],this.strategySum=[0,0,0],this.villainStrategy=e,this.setRegretSum=r.bind(this),this.villStrategy=[0,0,0],this.villRegretSum=[0,0,0],this.villStrategySum=[0,0,0]}return Object(d.a)(t,[{key:"getStrategy",value:function(){for(var t=0,e=0;e<3;e++)this.strategy[e]=this.regretSum[e]>0?this.regretSum[e]:0,t+=this.strategy[e];if(0===t){var r=this.getRandomStrat();console.log("New random strat created: ",r),this.strategy=r,t=1}for(var n=0;n<3;n++)this.strategy[n]/=t,this.strategySum[n]+=this.strategy[n];return this.strategy}},{key:"getVillStrategy",value:function(){for(var t=0,e=0;e<3;e++)this.villStrategy[e]=this.villRegretSum[e]>0?1*this.villRegretSum[e]:0,t+=this.villStrategy[e];if(0===t){var r=this.getRandomStrat();this.villStrategy=r,t=1}for(var n=0;n<3;n++)this.villStrategy[n]/=t,this.villStrategySum[n]+=this.villStrategy[n];return this.villStrategy}},{key:"getAction",value:function(t){for(var e=Math.random(),r=0,n=0;r<2&&!(e<(n+=t[r]));)r++;return r}},{key:"train",value:function(t){for(var e,r,n,i=[],a=[],c=0;c<t;c++){e=this.getStrategy(),r=this.getAction(e),this.getVillStrategy(),i[n=this.getAction(this.villStrategy)]=0,i[2===n?0:n+1]=1,i[0===n?2:n-1]=-1,a[r]=0,a[2===r?0:r+1]=1,a[0===r?2:r-1]=-1;for(var s=0;s<3;s++)this.regretSum[s]+=i[s]-i[r],this.villRegretSum[s]+=a[s]-a[n],c%100===0&&this.setRegretSum(Object(S.a)(this.regretSum))}}},{key:"getRandomStrat",value:function(){var t=Math.random(),e=Math.random(),r=Math.random(),n=t+e+r;return[t/n,e/n,r/n]}},{key:"getAvgStrategy",value:function(){for(var t=[0,0,0],e=this.strategySum.reduce((function(t,e){return t+e})),r=0;r<3;r++)t[r]=e>0?this.strategySum[r]/e:.333333333;return t}}]),t}();r(40);var p=Object(u.b)(null,{updateRegrets:function(t){return{type:o,regrets:t}}})((function(t){var e=t.updateRegrets,r=Object(i.useState)([.3333333,.3333333,.333333]),a=Object(s.a)(r,2),c=a[0],u=a[1],o=Object(i.useState)(1e3),l=Object(s.a)(o,2),j=l[0],d=l[1],v=Object(i.useState)(!1),g=Object(s.a)(v,2),f=g[0],b=g[1],S=Object(i.useState)(!1),p=Object(s.a)(S,2),y=p[0],x=p[1],C=[0,0,0];if(f){var R=new m(c,(function(t){e(t)}));R.train(j),C=R.getAvgStrategy()}return Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"controls",children:[Object(n.jsx)("button",{id:"rps-run-btn",onClick:function(){!1===f?b(!0):x(!y)},children:"RUN"}),Object(n.jsxs)("div",{id:"rps-iterations",children:[Object(n.jsx)("div",{children:"ITERATIONS"}),Object(n.jsx)("form",{children:Object(n.jsx)("label",{children:Object(n.jsx)("input",{type:"text",id:"",value:j,onChange:function(t){d(t.target.value)}})})})]}),Object(n.jsx)(h,{strat:C,setStrat:u})]}),Object(n.jsx)(O,{regrets:{}})]})})),y=function(){function t(){Object(j.a)(this,t),this.cumulativeRegrets=[0,0],this.strategySum=[0,0]}return Object(d.a)(t,[{key:"normalize",value:function(t){var e=t.slice(),r=t.reduce((function(t,e){return t+e}));if(r>0)for(var n=0;n<2;n++)e[n]/=r;else e=[.5,.5];return e}},{key:"getStrategy",value:function(t){for(var e=this.cumulativeRegrets.map((function(t){return t>0?t:0})),r=this.normalize(e).map((function(e){return e*t})),n=0;n<2;n++)this.strategySum[n]+=r[n];return r}},{key:"getAvgStrategy",value:function(){return this.normalize(this.strategySum.slice())}}]),t}(),x=function(){function t(){Object(j.a)(this,t),this.infoSetMap={},this.actions=["B","C"]}return Object(d.a)(t,[{key:"hello",value:function(){return"Hello World"}},{key:"isTerminal",value:function(t){return["BC","BB","CC","CBB","CBC"].includes(t)}},{key:"getPayoff",value:function(t,e){if(["BC","CBC"].includes(t))return 1;var r=t.includes("B")?2:1,n=t.length%2,i=e[n],a=e[(n+1)%2];return"K"===i||"J"===a?r:-r}},{key:"getInformationSet",value:function(t){return this.infoSetMap[t]||(this.infoSetMap[t]=new y),this.infoSetMap[t]}},{key:"cfr",value:function(t,e,r,n){if(this.isTerminal(e))return this.getPayoff(e,t);for(var i=t[n],a=this.getInformationSet(i+e),c=a.getStrategy(r[n]),s=(n+1)%2,u=[0,0],o=0;o<2;o++){var l=c[o],h=r.slice();h[n]*=l,u[o]=-this.cfr(t,e+this.actions[o],h,s)}for(var j=u.reduce((function(t,e,r){return t+e*c[r]}),0),d=0;d<2;d++){var v,g=u[d]-j;v=r[s]*g,a.cumulativeRegrets[d]+=v}return j}},{key:"train",value:function(t){for(var e=0,r=["J","Q","K"],n=0;n<t;n++){var i=this.getRandomSubarray(r,2);e+=this.cfr(i,"",[1,1],0)}return e}},{key:"getRandomSubarray",value:function(t,e){for(var r,n,i=t.slice(0),a=t.length;a--;)r=i[n=Math.floor((a+1)*Math.random())],i[n]=i[a],i[a]=r;return i.slice(0,e)}}]),t}();r(41);var C=function(){var t=Object(i.useState)(1e3),e=Object(s.a)(t,2),r=e[0],a=e[1],c=new x;c.train(r);var u=[],o=[];for(var l in c.infoSetMap){var h=c.infoSetMap[l].getAvgStrategy()[0].toFixed(2),j=c.infoSetMap[l].getAvgStrategy()[1].toFixed(2);u.push({html:Object(n.jsxs)("div",{children:[l," \u2003\u2003\u2003",h," \u2003\u2003\u2003",j]}),card:l})}u=u.sort((function(t,e){return t.card.length<e.card.length?-1:e.card.length<t.card.length?1:t.card<e.card?-1:e.card<t.card?1:0}));for(var d=0;d<u.length;d++)o.push(u[d].html);o.unshift(Object(n.jsx)("div",{children:"CARDS \u2003 BET/CALL \u2003 CHECK/FOLD"})),o.unshift(Object(n.jsx)("h4",{children:" FIRST ACTION"})),o.splice(5,0,Object(n.jsx)("h4",{children:" SECOND ACTION "})),o.splice(6,0,Object(n.jsx)("div",{children:"CARDS \u2003 BET/CALL \u2003 CHECK/FOLD"})),o.splice(13,0,Object(n.jsx)("h4",{children:" THIRD ACTION "})),o.splice(14,0,Object(n.jsx)("div",{children:"CARDS \u2003 BET/CALL \u2003 CHECK/FOLD"}));var v=Object(i.useState)(!1),g=Object(s.a)(v,2),f=g[0],b=g[1],O=Object(i.useState)(!1),S=Object(s.a)(O,2),m=S[0],p=S[1];return Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"controls",children:[Object(n.jsx)("button",{id:"rps-run-btn",onClick:function(){!1===f?b(!0):p(!m)},children:"RUN"}),Object(n.jsxs)("div",{id:"rps-iterations",children:[Object(n.jsx)("div",{children:"ITERATIONS"}),Object(n.jsx)("form",{children:Object(n.jsx)("label",{children:Object(n.jsx)("input",{type:"text",value:r,onChange:function(t){return a(t.target.value)}})})})]})]}),Object(n.jsx)("div",{children:o})]})};r(42);function R(t){var e=t.selected,r=t.setSelected;return Object(n.jsx)("div",{className:"navbar",children:["RPS","Kuhn Poker","MW Kuhn","Leduc Hold'em"].map((function(t,i){var a=i===e?"nav-btn nav-selected":"nav-btn";return Object(n.jsx)("button",{onClick:function(){return r(i)},className:a,children:t})}))})}var k=function t(){Object(j.a)(this,t),this.hello="hello world"};r(43);var A=function(){var t=Object(i.useState)(1e3),e=Object(s.a)(t,2),r=e[0],a=(e[1],new k);return Object(n.jsx)("div",{children:a.hello.repeat(r/1e3*3)})};r(44);var T=function(){var t=Object(i.useState)(2),e=Object(s.a)(t,2),r=e[0],a=e[1],c=[Object(n.jsx)(p,{}),Object(n.jsx)(C,{}),Object(n.jsx)(A,{})],u=c[r%c.length];return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(R,{selected:r,setSelected:a}),u]})},B=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,46)).then((function(e){var r=e.getCLS,n=e.getFID,i=e.getFCP,a=e.getLCP,c=e.getTTFB;r(t),n(t),i(t),a(t),c(t)}))},M=r(5),N=r(18),E=r(19),F=r(20),I=Object(M.combineReducers)({rps:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case o:var r=Object.assign({},t);return r.regrets.push(e.regrets),r.count=t.count+1,r;default:return t}}}),L=Object(F.composeWithDevTools)(Object(M.applyMiddleware)(E.a,Object(N.createLogger)({collapsed:!0}))),D=Object(M.createStore)(I,L);c.a.render(Object(n.jsx)(u.a,{store:D,children:Object(n.jsx)(T,{})}),document.getElementById("root")),B()}},[[45,1,2]]]);
//# sourceMappingURL=main.41315746.chunk.js.map